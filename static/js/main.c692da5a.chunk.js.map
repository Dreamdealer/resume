{"version":3,"sources":["Config/tetrisConfig.ts","Config/tetrominos.ts","Components/Cell.tsx","Components/Instructions.tsx","Components/Stage.tsx","gameHelpers.ts","Hooks/usePlayer.ts","Hooks/useStage.ts","Hooks/useInterval.ts","Components/Display.tsx","Components/Button.tsx","Components/GameOver.tsx","Components/Styles.ts","Components/OnScreenControls.tsx","Components/FancyRadios.tsx","Components/Label.tsx","Components/Settings.tsx","Components/Box.tsx","Components/Themes.ts","Assets/slider.svg","Components/Tetris.tsx","Hooks/useGameStatus.ts","index.tsx"],"names":["tetrisConfig","width","height","size","spacing","TETROMINOS","0","shape","color","I","J","L","O","S","T","Z","randomTetromino","tetrominos","randTetromino","Math","floor","random","length","StyledCube","styled","div","transparent","StyledCubeFace","face","handleFaceTransform","Cell","props","StyledInstructions","theme","modal","Instructions","StyledStage","stage","background","showInstructions","lines","main","borderWidth","borderColor","paused","StyledPause","StyledRow","StyledColumnGuide","left","columnWidth","guide","Stage","activeColumns","map","row","rowIndex","index","type","createStage","Array","from","fill","checkCollision","player","moveX","x","moveY","y","tetromino","pos","playerStartingState","collided","useStage","resetPlayer","useState","setStage","rowsCleared","setRowsCleared","setActiveColumns","useEffect","updateStage","prevStage","newStage","cell","offsetArray","indexes","filter","min","max","cells","flat","forEach","value","newY","newX","reduce","accumulator","findIndex","prev","unshift","push","sweepRows","prevState","useInterval","callback","delay","savedCallback","useRef","current","interval","setInterval","clearInterval","Display","buttonsAndDisplays","fontSize","Button","button","tSS","GameOver","StyledSettingsContainer","StyledSettingsOverlay","overlay","StyledDisplaysContainer","StyledDisplays","StyledControlsContainer","StyledControl","AppContainer","StyledTetrisContainer","tilt","gameOver","StyledSlider","input","OnScreenControls","onClick","e","onPushLeft","preventDefault","onPushRotate","onPushDown","onPushRight","StyledFancyRadiosContainer","StyledLabel","label","checked","FancyRadios","options","option","selected","name","onChange","target","Label","mt","Settings","localSettings","onLocalSettingsChange","parseInt","style","marginTop","display","justifyContent","onCloseSettings","Box","lightTheme","darkTheme","_extends","Object","assign","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","className","d","SvgSlider","_ref","svgRef","title","titleId","xmlns","xmlnsXlink","viewBox","enableBackground","xmlSpace","ref","id","ForwardRef","Tetris","setLocalSettings","dropTime","setDropTime","showSettings","setShowSettings","setGameOver","gamePaused","setGamePaused","gameStarted","setGameStarted","setPlayer","rotate","matrix","direction","rotatedTetromino","_","col","reverse","useCallback","clonedPlayer","JSON","parse","stringify","offset","usePlayer","updatePlayerPosition","playerRotate","score","setScore","rows","setRows","level","setLevel","linePoints","calcScore","useGameStatus","gameRef","movePlayer","dir","playerMovement","startGame","moveTetrominoDown","canMoveTo","tryToMoveTo","action","localStorageSettings","localStorage","getItem","settingsObject","setItem","focus","role","tabIndex","onKeyUp","keyCode","onKeyDown","event","console","log","move","marginLeft","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c692da5a.chunk.js","sourcesContent":["export const tetrisConfig = {\n    stage: {\n        width: 10,\n        height: 20,\n    },\n    cell: {\n        size: 32,\n        spacing: 0,\n    },\n};\n","export type TetrominoShapeType = Array<Array<string | number>>;\n\nexport type TetrominoKeyType = 0 | \"I\" | \"J\" | \"L\" | \"O\" | \"S\" | \"T\" | \"Z\";\n\nexport type TetrominoType = {\n    shape: TetrominoShapeType;\n    color: string;\n}\n\nexport type TetrominosType = {\n    [key in TetrominoKeyType]: TetrominoType;\n};\n\nexport const TETROMINOS: TetrominosType = {\n    0: { shape: [[0]], color: '0, 0, 0' },\n    I: {\n        shape: [[0, 'I', 0, 0], [0, 'I', 0, 0], [0, 'I', 0, 0], [0, 'I', 0, 0]],\n        color: '#9cdaff',\n    },\n    J: {\n        shape: [[0, 'J', 0], [0, 'J', 0], ['J', 'J', 0]],\n        color: '#c568a5',\n    },\n    L: {\n        shape: [[0, 'L', 0], [0, 'L', 0], [0, 'L', 'L']],\n        color: '#ffd265',\n    },\n    O: {\n        shape: [['O', 'O'], ['O', 'O']],\n        color: '#bcff7c',\n    },\n    S: {\n        shape: [[0, 'S', 'S'], ['S', 'S', 0], [0, 0, 0]],\n        color: '#cd94ff',\n    },\n    T: {\n        shape: [[0, 0, 0], ['T', 'T', 'T'], [0, 'T', 0]],\n        color: '#8aedeb',\n    },\n    Z: {\n        shape: [['Z', 'Z', 0], [0, 'Z', 'Z'], [0, 0, 0]],\n        color: '#dea6ec',\n    },\n};\n  \nexport const randomTetromino = () => {\n    const tetrominos = 'IJLOSTZ';\n    const randTetromino = tetrominos[Math.floor(Math.random() * tetrominos.length)];\n    return TETROMINOS[randTetromino as keyof TetrominosType];\n};","import React, { FC } from 'react';\nimport styled from 'styled-components';\nimport { tetrisConfig } from '../Config/tetrisConfig';\n\ntype PropsType = {\n    color: string;\n};\n\nconst handleFaceTransform = (face: string) => {\n    switch (face) {\n        case 'right':\n            return 'rotateY(90deg)';\n        case 'back':\n            return 'rotateY(180deg)';\n        case 'left':\n            return 'rotateY(-90deg)';\n        case 'top':\n            return 'rotateX(90deg)';\n        case 'bottom':\n            return 'rotateX(-90deg)';\n        default:\n        case 'front':\n            return 'rotateY(0deg)';\n    }\n};\n\nexport const StyledCube = styled.div<{ transparent?: boolean }>`\n    width: ${tetrisConfig.cell.size}px;\n    height: ${tetrisConfig.cell.size}px;\n    position: relative;\n    transform-style: preserve-3d;\n    transform: translateX(${tetrisConfig.cell.spacing / 2}px) translateY(${tetrisConfig.cell.spacing / 2}px)\n        translateZ(${tetrisConfig.cell.size}px);\n    transition: transform 1s;\n\n    ${({ transparent }) =>\n        !transparent &&\n        `\n        &::after {\n            content: '';\n            position: absolute;\n            width: ${tetrisConfig.cell.size}px;\n            height: ${tetrisConfig.cell.size}px;\n            background: rgba(0,0,0,.1);\n            box-shadow: 0 0 10px rgba(0,0,0,.1);\n            transform: translateZ(-${tetrisConfig.cell.size}px);\n        }\n    `}\n`;\n\nexport const StyledCubeFace = styled.div<{ face: string; color: string }>`\n    position: absolute;\n    width: ${tetrisConfig.cell.size - tetrisConfig.cell.spacing * 2}px;\n    height: ${tetrisConfig.cell.size - tetrisConfig.cell.spacing * 2}px;\n    background: ${({ color }) => color};\n    line-height: ${tetrisConfig.cell.size}px;\n    font-size: 40px;\n    font-weight: bold;\n    color: white;\n    text-align: center;\n    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1) inset;\n    transform: ${({ face }) =>\n        `${handleFaceTransform(face)} translateZ(${tetrisConfig.cell.size / 2 - tetrisConfig.cell.spacing}px)`};\n`;\n\nconst Cell: FC<PropsType> = props => {\n    if (props.color === 'transparent') {\n        return <StyledCube transparent />;\n    }\n\n    return (\n        <StyledCube>\n            <StyledCubeFace face=\"front\" color={props.color} />\n            <StyledCubeFace face=\"back\" color={props.color} />\n            <StyledCubeFace face=\"right\" color={props.color} />\n            <StyledCubeFace face=\"left\" color={props.color} />\n            <StyledCubeFace face=\"top\" color={props.color} />\n            <StyledCubeFace face=\"bottom\" color={props.color} />\n        </StyledCube>\n    );\n};\n\nexport default Cell;\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst StyledInstructions = styled.div`\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: ${({ theme }) => theme.modal.color};\n    padding: 20px;\n`;\n\nconst Instructions = () => (\n    <StyledInstructions>\n        Keybindings:\n        <br />\n        <br />\n        Up = Rotate tetromino\n        <br />\n        <br />\n        Left = Move tetromino left one cell\n        <br />\n        <br />\n        Right = Move tetromino right one cell\n        <br />\n        <br />\n        Down = Move tetromino down one cell\n        <br />\n        <br />\n        PageDown or End = Move tetromino all the way down\n    </StyledInstructions>\n);\n\nexport default Instructions;\n","import React, { FC } from 'react';\nimport styled from 'styled-components';\nimport { tetrisConfig } from '../Config/tetrisConfig';\nimport { TETROMINOS, TetrominosType } from '../Config/tetrominos';\nimport { StageType } from '../gameHelpers';\nimport Cell, { StyledCube } from './Cell';\nimport Instructions from './Instructions';\n\nexport const StyledStage = styled.div<{ showInstructions: boolean; paused: boolean }>`\n    width: ${() => `${tetrisConfig.stage.width * tetrisConfig.cell.size}px`};\n    height: ${() => `${tetrisConfig.stage.height * tetrisConfig.cell.size}px`};\n    display: flex;\n    flex-flow: column nowrap;\n    justify-content: flex-end;\n    align-items: flex-end;\n    background: ${({ theme }) => theme.stage.background};\n\n    ${({ showInstructions, theme }) =>\n        !showInstructions &&\n        `\n        background-image: linear-gradient(${theme.stage.lines} 1px, transparent 1px),\n            linear-gradient(90deg, ${theme.stage.lines} 1px, transparent 1px);\n        background-size: ${tetrisConfig.cell.size}px ${tetrisConfig.cell.size}px,\n            ${tetrisConfig.cell.size}px ${tetrisConfig.cell.size}px;\n        background-position: -1px -1px, -1px -1px;\n    `}\n\n    box-shadow: 0 0 0 1px ${({ theme }) => theme.stage.lines} inset;\n    border: ${({ theme }) => theme.main.borderWidth} solid ${({ theme }) => theme.main.borderColor};\n    border-radius: 8px;\n    position: relative;\n\n    ${StyledCube} {\n        box-shadow: none;\n        filter: ${({ paused }) => (paused ? 'blur(15px)' : 'none')};\n    }\n`;\n\nconst StyledPause = styled.div`\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: ${({ theme }) => theme.modal.color};\n    padding: 20px;\n    font-size: 40px;\n`;\n\nconst StyledRow = styled.div`\n    display: flex;\n    height: ${tetrisConfig.cell.size}px;\n    width: 100%;\n`;\n\nconst StyledColumnGuide = styled.div<{ left: number; size: number; columnWidth: number }>`\n    position: absolute;\n    left: ${({ left, columnWidth }) => `${left * columnWidth}px`};\n    width: ${({ size, columnWidth }) => `${size * columnWidth}px`};\n    top: 0;\n    bottom: 0;\n    background: ${({ theme }) => theme.stage.guide};\n`;\n\ntype PropsType = {\n    stage: StageType;\n    paused: boolean;\n    showInstructions: boolean;\n    activeColumns: {\n        left: number;\n        size: number;\n    };\n};\n\nconst Stage: FC<PropsType> = props => {\n    return (\n        <StyledStage showInstructions={props.showInstructions} paused={props.paused}>\n            {props.showInstructions && <Instructions />}\n            {props.paused && <StyledPause>Paused</StyledPause>}\n            {props.activeColumns.size > 0 && (\n                <StyledColumnGuide {...props.activeColumns} columnWidth={tetrisConfig.cell.size} />\n            )}\n            {props.stage.map((row: Array<Array<any>>, rowIndex: number) => (\n                <StyledRow key={rowIndex}>\n                    {row.map(([type, state], index: number) => {\n                        return (\n                            <Cell\n                                key={rowIndex + index}\n                                color={type === 0 ? 'transparent' : TETROMINOS[type as keyof TetrominosType].color}\n                            />\n                        );\n                    })}\n                </StyledRow>\n            ))}\n        </StyledStage>\n    );\n};\n\nexport default Stage;\n","import { PlayerStateType } from './Hooks/usePlayer';\nimport { tetrisConfig } from './Config/tetrisConfig';\nimport { TetrominoShapeType } from './Config/tetrominos';\n\nexport type StageCellType = [TetrominoShapeType];\n\nexport type StageType = Array<Array<any>>;\n\nexport const createStage = (): StageType => {\n    const emptyStage = Array.from(Array(tetrisConfig.stage.height), () =>\n        new Array(tetrisConfig.stage.width).fill([0, 'clear']),\n    );\n\n    return emptyStage;\n};\n\nexport const checkCollision = (\n    player: PlayerStateType,\n    stage: StageType,\n    { x: moveX, y: moveY }: { x: number; y: number },\n) => {\n    for (let y = 0; y < player.tetromino.length; y += 1) {\n        for (let x = 0; x < player.tetromino[y].length; x += 1) {\n            // 1. Check that we're on an actual Tetromino cell\n            if (player.tetromino[y][x] !== 0) {\n                if (\n                    // 2. Check that our move is inside the game areas height (y)\n                    // We shouldn't go through the bottom of the play area\n                    !stage[y + player.pos.y + moveY] ||\n                    // 3. Check that our move is inside the game areas width (x)\n                    !stage[y + player.pos.y + moveY][x + player.pos.x + moveX] ||\n                    // 4. Check that the cell wer'e moving to isn't set to clear\n                    stage[y + player.pos.y + moveY][x + player.pos.x + moveX][1] !== 'clear'\n                ) {\n                    return true;\n                }\n            }\n        }\n    }\n};\n","import { useCallback, useState } from 'react';\nimport { checkCollision, StageType } from '../gameHelpers';\nimport { tetrisConfig } from '../Config/tetrisConfig';\nimport { randomTetromino, TETROMINOS, TetrominoShapeType } from '../Config/tetrominos';\n\nexport type PositionType = {\n    x: number;\n    y: number;\n};\n\nexport type PlayerStateType = {\n    pos: PositionType;\n    tetromino: TetrominoShapeType;\n    collided: boolean;\n};\n\nexport type PlayerPositionType = PositionType & { collided: boolean };\n\nconst playerStartingState: PlayerStateType = {\n    pos: {\n        x: 0,\n        y: 0,\n    },\n    tetromino: TETROMINOS[0].shape,\n    collided: false,\n};\n\nexport const usePlayer = () => {\n    const [player, setPlayer] = useState(playerStartingState);\n\n    const rotate = (matrix: TetrominoShapeType, direction: number) => {\n        const rotatedTetromino = matrix.map((_, index) => matrix.map(col => col[index]));\n\n        if (direction > 0) return rotatedTetromino.map(row => row.reverse());\n\n        return rotatedTetromino.reverse();\n    };\n\n    const playerRotate = (stage: StageType, direction: number) => {\n        const clonedPlayer = JSON.parse(JSON.stringify(player));\n        clonedPlayer.tetromino = rotate(clonedPlayer.tetromino, direction);\n\n        const pos = clonedPlayer.pos.x;\n        let offset = 1;\n        while (checkCollision(clonedPlayer, stage, { x: 0, y: 0 })) {\n            clonedPlayer.pos.x += offset;\n            offset = -(offset + (offset > 0 ? 1 : -1));\n            if (offset > clonedPlayer.tetromino[0].length) {\n                rotate(clonedPlayer.tetromino, -direction);\n                clonedPlayer.pos.x = pos;\n                return;\n            }\n        }\n        setPlayer(clonedPlayer);\n    };\n\n    const updatePlayerPosition = ({ x, y, collided }: PlayerPositionType) => {\n        setPlayer(prev => ({\n            ...prev,\n            pos: {\n                x: (prev.pos.x += x),\n                y: (prev.pos.y += y),\n            },\n            collided,\n        }));\n    };\n\n    const resetPlayer = useCallback(() => {\n        setPlayer({\n            pos: {\n                x: tetrisConfig.stage.width / 2 - 2,\n                y: 0,\n            },\n            tetromino: randomTetromino().shape,\n            collided: false,\n        });\n    }, []);\n\n    return [player, updatePlayerPosition, resetPlayer, playerRotate] as const;\n};\n","import { useState, useEffect } from 'react';\nimport { createStage, StageType } from '../gameHelpers';\nimport { PlayerStateType } from './usePlayer';\n\nexport const useStage = (player: PlayerStateType, resetPlayer: any) => {\n    const [ stage, setStage ] = useState(createStage());\n    const [ rowsCleared, setRowsCleared ] = useState(0);\n    const [ activeColumns, setActiveColumns ] = useState({left: 0, size: 0});\n\n    useEffect(() => {\n        setRowsCleared(0);\n\n        const sweepRows = (newStage: StageType) => (\n            newStage.reduce((accumulator, row) => {\n                if (row.findIndex(cell => cell[0] === 0) === -1) {\n                    setRowsCleared(prev => prev + 1);\n                    accumulator.unshift(new Array(newStage[0].length).fill([0, 'clear']));\n\n                    return accumulator;\n                }\n\n                accumulator.push(row);\n\n                return accumulator;\n            }, [])\n        )\n\n        const updateStage = (prevStage: StageType): StageType => {\n            const newStage = prevStage.map(row => {\n                return row.map(cell => { return cell[1] === 'clear' ? [0, 'clear'] : cell })\n            });\n\n            const offsetArray = player.tetromino.map((row) => {\n                const indexes = row.map((cell, index) => {\n                    return cell !== 0 ? index + 1 : 0;\n                }).filter(index => index > 0);\n\n                if (indexes.length > 0) {\n                    return [Math.min(...indexes), Math.max(...indexes)];\n                }\n                \n                return [];\n            }).filter(cells => cells.length > 0).flat();\n\n            setActiveColumns({\n                left: player.pos.x + (Math.min(...offsetArray) - 1),\n                size: Math.max(...offsetArray) - Math.min(...offsetArray) + 1,\n            });\n\n            // draw the current tetromino\n            player.tetromino.forEach((row, y: number) => {\n                row.forEach((value: number | string, x: number) => {\n                    if (value !== 0) {\n                        const newY = y + player.pos.y;\n                        const newX = x + player.pos.x;\n\n                        //console.log(`newX: ${newX}, width: ${player.tetromino[0].length}`);\n\n                        newStage[newY][newX] = [\n                            value,\n                            player.collided ? 'merged' : 'clear',\n                        ];\n                    }\n                });\n            });\n\n            // check collisions\n            if (player.collided) {\n                resetPlayer();\n\n                return sweepRows(newStage);\n            }\n\n            return newStage;\n        }\n\n        setStage(prevState => updateStage(prevState));\n\n    }, [player, resetPlayer]);\n\n    return [ stage, setStage, rowsCleared, activeColumns ] as const;\n};","import { useEffect, useRef } from 'react';\n\nconst useInterval = (callback: Function, delay?: number | null) => {\n    const savedCallback = useRef<Function>(() => {});\n\n    useEffect(() => {\n        savedCallback.current = callback;\n    });\n\n    useEffect(() => {\n        if (delay !== null) {\n        const interval = setInterval(() => savedCallback.current(), delay || 0);\n            return () => clearInterval(interval);\n        }\n\n        return undefined;\n    }, [delay]);\n};\n\nexport default useInterval;\n","import styled from 'styled-components';\n\nconst Display = styled.div`\n    background: ${({ theme }) => theme.buttonsAndDisplays.background};\n    border: ${({ theme }) => theme.main.borderWidth} solid ${({ theme }) => theme.main.borderColor};\n    color: ${({ theme }) => theme.buttonsAndDisplays.color};\n    font-size: ${({ theme }) => theme.main.fontSize};\n    font-family: 'Press Start 2P', cursive;\n    border-radius: 8px;\n    line-height: 50px;\n    margin-top: 20px;\n    padding: 0 20px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nexport default Display;\n","import styled from 'styled-components';\n\nconst Button = styled.button`\n    background: ${({ theme }) => theme.buttonsAndDisplays.background};\n    border: ${({ theme }) => theme.main.borderWidth} solid ${({ theme }) => theme.main.borderColor};\n    color: ${({ theme }) => theme.buttonsAndDisplays.color};\n    font-size: ${({ theme }) => theme.main.fontSize};\n    display: flex;\n    flex-grow: 1;\n    justify-content: center;\n    align-items: center;\n    outline: none;\n    padding: 0 20px;\n    border-radius: 8px;\n    line-height: 50px;\n    font-family: inherit;\n\n    .custom-fill {\n        fill: ${({ theme }) => theme.buttonsAndDisplays.color};\n    }\n\n    &:hover {\n        cursor: pointer;\n        box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);\n    }\n`;\n\nexport default Button;\n","import styled from 'styled-components';\nimport Button from './Button';\n\n// tSS = Text Shadow Size\nconst tSS = '1vw';\n\nconst GameOver = styled.div`\n    position: fixed;\n    display: flex;\n    width: 100%;\n    height: 100%;\n    justify-content: center;\n    align-items: center;\n    z-index: 99;\n    color: #000;\n    font-size: 60px;\n    font-size: 8vw;\n    display: flex;\n    flex-flow: column wrap;\n    font-family: 'Press Start 2P', cursive;\n    text-shadow: ${tSS} ${tSS} 0 #fff, ${tSS} 0 0 #fff, 0 ${tSS} 0 #fff, -${tSS} ${tSS} 0 #fff, 00px 0 #fff,\n        0-${tSS} 0 #fff, ${tSS} -${tSS} 0 #fff, -${tSS} -${tSS} 0 #fff, 0 0 30px #000;\n\n    ${Button} {\n        flex-grow: 0;\n    }\n`;\n\nexport default GameOver;\n","import styled from 'styled-components';\nimport { tetrisConfig } from '../Config/tetrisConfig';\nimport Display from './Display';\n\nexport const StyledSettingsContainer = styled.div`\n    background: ${({ theme }) => theme.modal.background};\n    color: ${({ theme }) => theme.modal.color};\n    padding: 30px;\n    border-radius: 8px;\n`;\n\nexport const StyledSettingsOverlay = styled.div`\n    color: ${({ theme }) => theme.main.color};\n    position: fixed;\n    display: flex;\n    width: 100%;\n    height: 100%;\n    justify-content: center;\n    align-items: center;\n    z-index: 99;\n    display: flex;\n    flex-flow: column wrap;\n    font-family: 'Press Start 2P', cursive;\n    background: ${({ theme }) => theme.modal.overlay}; ;\n`;\n\nexport const StyledDisplaysContainer = styled.div`\n    margin-right: 20px;\n    display: flex;\n    flex-flow: column wrap;\n    justify-content: flex-start;\n    align-items: stretch;\n`;\n\nexport const StyledDisplays = styled.div`\n    display: flex;\n    flex-flow: column wrap;\n`;\n\nexport const StyledControlsContainer = styled.div`\n    display: none;\n\n    @media (max-width: ${tetrisConfig.cell.size * tetrisConfig.stage.width + 300}px) {\n        display: flex;\n    }\n\n    position: fixed;\n    top: ${() => `${tetrisConfig.stage.height * tetrisConfig.cell.size - 50}px`};\n    height: 50px;\n    width: 100%;\n    z-index: 98;\n    justify-content: center;\n    align-items: stretch;\n`;\n\nexport const StyledControl = styled.button`\n    display: flex;\n    outline: none;\n    border: none;\n    padding: 0;\n    flex-grow: 1;\n    justify-content: center;\n    background: rgba(255, 255, 255, 0.5);\n    padding: 20px;\n`;\n\nexport const AppContainer = styled.div`\n    background: ${({ theme }) => theme.main.background};\n    width: 100%;\n    display: flex;\n    flex-grow: 1;\n    justify-content: center;\n    align-items: center;\n    flex-flow: row nowrap;\n`;\n\nexport const StyledTetrisContainer = styled.div<{ gameOver: boolean; tilt: number }>`\n    outline: none;\n    display: flex;\n    flex-grow: 1;\n    flex-flow: row nowrap;\n    justify-content: center;\n    align-items: flex-start;\n    transform-style: preserve-3d;\n    transform: rotateX(${({ tilt }) => `${tilt}deg`}) rotateY(0deg) translateZ(0px);\n    filter: ${({ gameOver }) => (gameOver ? 'blur(5px)' : 'none')};\n    font-family: 'Press Start 2P', cursive;\n\n    // desktop size\n    @media (min-width: ${tetrisConfig.cell.size * tetrisConfig.stage.width + 300}px) {\n        flex-flow: row nowrap;\n\n        ${StyledDisplaysContainer} {\n            width: 300px;\n        }\n    }\n\n    // mobile size\n    @media (max-width: ${tetrisConfig.cell.size * tetrisConfig.stage.width + 300}px) {\n        flex-flow: column nowrap;\n        justify-content: center;\n        align-items: center;\n        padding-top: 10px;\n\n        ${Display} {\n            font-size: 14px;\n            margin-top: 0;\n            padding: 8px;\n            line-height: 14px;\n            display: block;\n            border: 0;\n        }\n\n        ${StyledDisplaysContainer} {\n            margin: 0;\n            padding: 20px;\n            order: 2;\n\n            ${StyledDisplays} {\n                border: ${({ theme }) => theme.main.borderWidth} solid ${({ theme }) => theme.main.borderColor};\n                border-radius: 8px;\n                flex-flow: row wrap;\n                margin: 10px 0;\n                background: #fff;\n            }\n        }\n    }\n`;\n\nexport const StyledSlider = styled.input`\n    width: 100%;\n`;\n","import React, { FC } from 'react';\nimport { StyledControl, StyledControlsContainer } from './Styles';\n\ntype PropsType = {\n    onPushLeft(): void;\n    onPushRight(): void;\n    onPushRotate(): void;\n    onPushDown(): void;\n};\n\nconst OnScreenControls: FC<PropsType> = props => (\n    <StyledControlsContainer>\n        <StyledControl\n            onClick={e => {\n                props.onPushLeft();\n                e.preventDefault();\n            }}\n        >\n            Left\n        </StyledControl>\n        <StyledControl\n            onClick={e => {\n                props.onPushRotate();\n                e.preventDefault();\n            }}\n        >\n            Rotate\n        </StyledControl>\n        <StyledControl\n            onClick={e => {\n                props.onPushDown();\n                e.preventDefault();\n            }}\n        >\n            Down\n        </StyledControl>\n        <StyledControl\n            onClick={e => {\n                props.onPushRight();\n                e.preventDefault();\n            }}\n        >\n            Right\n        </StyledControl>\n    </StyledControlsContainer>\n);\n\nexport default OnScreenControls;\n","import React, { FC } from 'react';\nimport styled from 'styled-components';\n\nconst StyledFancyRadiosContainer = styled.div`\n    border: ${({ theme }) => theme.main.borderWidth} solid ${({ theme }) => theme.main.borderColor};\n    border-radius: 8px;\n    display: flex;\n    flex-flow: row nowrap;\n    align-items: stretch;\n\n    input {\n        display: none;\n    }\n`;\n\nconst StyledLabel = styled.label<{ checked: boolean }>`\n    display: flex;\n    flex-grow: 1;\n    justify-content: center;\n    padding: 20px;\n    color: ${({ checked, theme }) => (checked ? '#F00' : theme.main.color)};\n`;\n\ntype PropsType = {\n    name: string;\n    options: Array<{\n        value: string;\n        label: string;\n    }>;\n    selected: string;\n    onChange(selectedValue: string): void;\n};\n\nconst FancyRadios: FC<PropsType> = props => (\n    <StyledFancyRadiosContainer>\n        {props.options.map(option => (\n            <StyledLabel checked={props.selected === option.value}>\n                <input\n                    type=\"radio\"\n                    name={props.name}\n                    value={option.value}\n                    checked={props.selected === option.value}\n                    onChange={({ target }) => {\n                        props.onChange(target.value);\n                    }}\n                />\n                {option.label}\n            </StyledLabel>\n        ))}\n    </StyledFancyRadiosContainer>\n);\n\nexport default FancyRadios;\n","import styled from 'styled-components';\n\nconst Label = styled.label<{ mt?: boolean }>`\n    display: flex;\n    outline: none;\n    line-height: 45px;\n    font-size: 20px;\n    margin-bottom: 12px;\n    margin-top: ${({ mt }) => (mt ? '30px' : '0')};\n    font-family: inherit;\n`;\n\nexport default Label;\n","import React, { FC } from 'react';\nimport Button from './Button';\nimport FancyRadios from './FancyRadios';\nimport Label from './Label';\nimport { StyledSettingsContainer, StyledSettingsOverlay, StyledSlider } from './Styles';\nimport { LocalSettingsType } from './Tetris';\n\ntype PropsType = {\n    localSettings: LocalSettingsType;\n    onLocalSettingsChange(localSettings: LocalSettingsType): void;\n    onCloseSettings(): void;\n};\n\nconst Settings: FC<PropsType> = props => (\n    <StyledSettingsOverlay>\n        <StyledSettingsContainer>\n            <Label>Tilt:</Label>\n            <StyledSlider\n                type=\"range\"\n                name=\"volume\"\n                value={props.localSettings.tilt}\n                min=\"0\"\n                max=\"65\"\n                onChange={({ target }) => {\n                    props.onLocalSettingsChange({\n                        ...props.localSettings,\n                        tilt: parseInt(target.value),\n                    });\n                }}\n            />\n            <Label mt>Theme:</Label>\n            <FancyRadios\n                name=\"theme\"\n                options={[\n                    { value: 'light', label: 'Light' },\n                    { value: 'dark', label: 'Dark' },\n                ]}\n                selected={props.localSettings.theme}\n                onChange={selected => {\n                    props.onLocalSettingsChange({\n                        ...props.localSettings,\n                        theme: selected as LocalSettingsType['theme'],\n                    });\n                }}\n            />\n            <div style={{ marginTop: '20px', display: 'flex', justifyContent: 'center' }}>\n                <Button\n                    onClick={() => {\n                        props.onCloseSettings();\n                    }}\n                >\n                    Close\n                </Button>\n            </div>\n        </StyledSettingsContainer>\n    </StyledSettingsOverlay>\n);\n\nexport default Settings;\n","import styled from 'styled-components';\n\nconst Box = styled.div`\n    display: flex;\n    flex-grow: 0;\n    flex-shrink: 0;\n    flex-direction: row;\n    justify-content: center;\n    align-items: stretch;\n`;\n\nexport default Box;\n","export const lightTheme = {\n    main: {\n        background: 'linear-gradient(to top, #ffefba, #ffffff)',\n        color: '#000',\n        borderColor: '#000',\n        borderWidth: '1px',\n        fontSize: '20px',\n    },\n    modal: {\n        overlay: 'rgba(0, 0, 0, 0.6)',\n        background: '#FFF',\n        color: '#000',\n    },\n    stage: {\n        background: '#FFF',\n        lines: '#BBB',\n        guide: 'rgba(0,0,0,0.05)',\n    },\n    buttonsAndDisplays: {\n        background: '#FFF',\n        color: '#000',\n    },\n};\n\nexport const darkTheme = {\n    main: {\n        background: 'linear-gradient(to bottom, #0f2027, #203a43, #2c5364)',\n        color: '#FFF',\n        borderColor: '#FFF',\n        borderWidth: '1px',\n        fontSize: '20px',\n    },\n    modal: {\n        overlay: 'rgba(255, 255, 255, 0.6)',\n        background: '#000',\n        color: '#FFF',\n    },\n    stage: {\n        background: '#000',\n        lines: '#777',\n        guide: 'rgba(255,255,255,0.2)',\n    },\n    buttonsAndDisplays: {\n        background: '#0f2027',\n        color: '#FFF',\n    },\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  className: \"custom-fill\",\n  d: \"M57,11h-9.5C45.9,5.7,40.3,2.8,35,4.5c-3.1,1-5.6,3.4-6.5,6.5H7c-1.7,0-3,1.3-3,3s1.3,3,3,3h21.5c1.7,5.3,7.3,8.2,12.5,6.5   c3.1-1,5.6-3.4,6.5-6.5H57c1.7,0,3-1.3,3-3S58.7,11,57,11z M38,18c-2.2,0-4-1.8-4-4s1.8-4,4-4s4,1.8,4,4S40.2,18,38,18z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"custom-fill\",\n  d: \"M57,29H26.5c-1.7-5.3-7.3-8.2-12.5-6.5c-3.1,1-5.6,3.4-6.5,6.5H7c-1.7,0-3,1.3-3,3c0,1.7,1.3,3,3,3h0.5   c1.7,5.3,7.3,8.2,12.5,6.5c3.1-1,5.6-3.4,6.5-6.5H57c1.7,0,3-1.3,3-3C60,30.3,58.7,29,57,29z M17,36c-2.2,0-4-1.8-4-4s1.8-4,4-4   s4,1.8,4,4S19.2,36,17,36z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"custom-fill\",\n  d: \"M57,47h-1.5c-1.7-5.3-7.3-8.2-12.5-6.5c-3.1,1-5.6,3.4-6.5,6.5H7c-1.7,0-3,1.3-3,3s1.3,3,3,3h29.5   c1.7,5.3,7.3,8.2,12.5,6.5c3.1-1,5.6-3.4,6.5-6.5H57c1.7,0,3-1.3,3-3S58.7,47,57,47z M46,54c-2.2,0-4-1.8-4-4s1.8-4,4-4s4,1.8,4,4   S48.2,54,46,54z\"\n}));\n\nfunction SvgSlider(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 64 64\",\n    style: {\n      enableBackground: \"new 0 0 64 64\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSlider);\nexport default __webpack_public_path__ + \"static/media/slider.9e01c979.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect, useRef, useState } from 'react';\nimport Stage from './Stage';\nimport { usePlayer } from '../Hooks/usePlayer';\nimport { useStage } from '../Hooks/useStage';\nimport useInterval from '../Hooks/useInterval';\nimport { createStage, checkCollision } from '../gameHelpers';\nimport { useGameStatus } from '../Hooks/useGameStatus';\nimport Display from './Display';\nimport { tetrisConfig } from '../Config/tetrisConfig';\nimport Button from './Button';\nimport GameOver from './GameOver';\nimport { StyledTetrisContainer, StyledDisplaysContainer, StyledDisplays, AppContainer } from './Styles';\nimport OnScreenControls from './OnScreenControls';\nimport Settings from './Settings';\nimport Box from './Box';\nimport { ThemeProvider } from 'styled-components';\nimport { lightTheme, darkTheme } from './Themes';\nimport { ReactComponent as Slider } from '../Assets/slider.svg';\n\ntype PlayerMovementType = 'LEFT' | 'RIGHT' | 'ROTATE' | 'DOWN' | 'FULLDOWN' | 'TOGGLE_PAUSE' | 'UNPAUSE';\n\nexport type LocalSettingsType = {\n    tilt: number;\n    theme: 'light' | 'dark';\n};\n\nconst Tetris = () => {\n    const [localSettings, setLocalSettings] = useState<LocalSettingsType>({\n        tilt: 0,\n        theme: 'light',\n    });\n    const [dropTime, setDropTime] = useState<null | number>(null);\n    const [showSettings, setShowSettings] = useState(false);\n    const [gameOver, setGameOver] = useState(false);\n    const [gamePaused, setGamePaused] = useState(false);\n    const [gameStarted, setGameStarted] = useState(false);\n    const [player, updatePlayerPosition, resetPlayer, playerRotate] = usePlayer();\n    const [stage, setStage, rowsCleared, activeColumns] = useStage(player, resetPlayer);\n    const [score, setScore, rows, setRows, level, setLevel] = useGameStatus(rowsCleared);\n    const gameRef = useRef<HTMLDivElement>(null);\n\n    const movePlayer = (dir: number) => {\n        playerMovement('UNPAUSE');\n        if (!checkCollision(player, stage, { x: dir, y: 0 })) {\n            updatePlayerPosition({ x: dir, y: 0, collided: false });\n        }\n    };\n\n    const startGame = () => {\n        setStage(createStage());\n        setDropTime(1000);\n        resetPlayer();\n        setScore(0);\n        setLevel(0);\n        setRows(0);\n        setGameOver(false);\n        setGameStarted(true);\n    };\n\n    const moveTetrominoDown = (y: number) => {\n        // Increase level and speed when player has cleared 10 rows\n        if (rows > (level + 1) * 10) {\n            setLevel(prev => prev + 1);\n            setDropTime(1000 / (level + 1) + 200);\n        }\n\n        // Check how far we can move without colliding\n        let canMoveTo = 0;\n\n        for (let tryToMoveTo = 1; tryToMoveTo <= y; tryToMoveTo += 1) {\n            if (checkCollision(player, stage, { x: 0, y: tryToMoveTo })) {\n                break;\n            } else {\n                canMoveTo = tryToMoveTo;\n            }\n        }\n\n        // debug collision detection\n        //console.log(`want to move to: ${y}, canMove to ${canMoveTo}, collidesAt ${collideAt}.`);\n\n        if (canMoveTo === y) {\n            updatePlayerPosition({ x: 0, y: y, collided: false });\n        } else {\n            if (player.pos.y < 1) {\n                setGameStarted(false);\n                setGameOver(true);\n                setDropTime(null);\n            }\n            updatePlayerPosition({ x: 0, y: canMoveTo, collided: true });\n        }\n    };\n\n    const keyUp = ({ keyCode }: { keyCode: number }) => {\n        if (!gameOver) {\n            if (keyCode === 40 || keyCode === 34 || keyCode === 35) {\n                playerMovement('UNPAUSE');\n            }\n        }\n    };\n\n    const playerMovement = (action: PlayerMovementType) => {\n        switch (action) {\n            case 'LEFT':\n                movePlayer(-1);\n                break;\n            case 'RIGHT':\n                movePlayer(1);\n                break;\n            case 'DOWN':\n                setDropTime(null);\n                moveTetrominoDown(1);\n                break;\n            case 'FULLDOWN':\n                setDropTime(null);\n                moveTetrominoDown(tetrisConfig.stage.height);\n                break;\n            case 'ROTATE':\n                playerRotate(stage, 1);\n                break;\n            case 'TOGGLE_PAUSE':\n                if (gamePaused) {\n                    setGamePaused(false);\n                    setDropTime(1000 / (level + 1));\n                } else {\n                    setGamePaused(true);\n                    setDropTime(null);\n                }\n                break;\n            case 'UNPAUSE':\n                setGamePaused(false);\n                setDropTime(1000 / (level + 1));\n                break;\n        }\n    };\n\n    const move = (event: React.KeyboardEvent<HTMLDivElement>) => {\n        let preventDefault = true;\n\n        if (!gameOver) {\n            switch (event.keyCode) {\n                case 37: // LEFT\n                    playerMovement('LEFT');\n                    break;\n                case 39: // RIGHT\n                    playerMovement('RIGHT');\n                    break;\n                case 40: // DOWN\n                    playerMovement('DOWN');\n                    break;\n                case 38: // UP\n                    playerMovement('ROTATE');\n                    break;\n                case 80: // P\n                    playerMovement('TOGGLE_PAUSE');\n                    break;\n                case 34: // Page Down\n                case 35: // End\n                    playerMovement('FULLDOWN');\n                    break;\n                default:\n                    console.log(`Unused keystroke: ${event.keyCode}`);\n                    preventDefault = false;\n                    break;\n            }\n        }\n\n        if (preventDefault) {\n            event.preventDefault();\n        }\n    };\n\n    useInterval(() => {\n        moveTetrominoDown(1);\n    }, dropTime);\n\n    useEffect(() => {\n        const localStorageSettings = localStorage.getItem('TetrisSettings');\n\n        if (localStorageSettings) {\n            setLocalSettings(JSON.parse(localStorageSettings));\n        }\n    }, []);\n\n    return (\n        <ThemeProvider theme={localSettings.theme === 'light' ? lightTheme : darkTheme}>\n            <AppContainer>\n                {showSettings && (\n                    <Settings\n                        localSettings={localSettings}\n                        onLocalSettingsChange={settingsObject => {\n                            setLocalSettings(settingsObject);\n                            localStorage.setItem('TetrisSettings', JSON.stringify(settingsObject));\n                        }}\n                        onCloseSettings={() => {\n                            setShowSettings(false);\n                        }}\n                    />\n                )}\n                {gameOver && (\n                    <GameOver>\n                        <p>Game Over</p>\n                        <Button\n                            onClick={() => {\n                                startGame();\n                                gameRef?.current?.focus();\n                            }}\n                        >\n                            Restart Game\n                        </Button>\n                    </GameOver>\n                )}\n                <OnScreenControls\n                    onPushLeft={() => {\n                        playerMovement('LEFT');\n                    }}\n                    onPushRotate={() => {\n                        playerMovement('ROTATE');\n                    }}\n                    onPushRight={() => {\n                        playerMovement('RIGHT');\n                    }}\n                    onPushDown={() => {\n                        playerMovement('DOWN');\n                        playerMovement('UNPAUSE');\n                    }}\n                />\n                <StyledTetrisContainer\n                    ref={gameRef}\n                    tilt={localSettings.tilt}\n                    gameOver={gameOver}\n                    role=\"button\"\n                    tabIndex={0}\n                    onKeyUp={keyUp}\n                    onKeyDown={event => {\n                        move(event);\n                    }}\n                >\n                    <StyledDisplaysContainer>\n                        <Box>\n                            {!gameStarted ? (\n                                <Button\n                                    onClick={() => {\n                                        startGame();\n                                    }}\n                                >\n                                    Start\n                                </Button>\n                            ) : (\n                                <Button\n                                    onClick={() => {\n                                        playerMovement('TOGGLE_PAUSE');\n                                    }}\n                                >\n                                    {gamePaused ? 'Continue' : 'Pause'}\n                                </Button>\n                            )}\n                            <Button\n                                onClick={() => {\n                                    if (!gamePaused) {\n                                        playerMovement('TOGGLE_PAUSE');\n                                    }\n                                    setShowSettings(true);\n                                }}\n                                style={{ marginLeft: '10px' }}\n                            >\n                                <Slider style={{ height: '30px' }} />\n                            </Button>\n                        </Box>\n                        <StyledDisplays>\n                            <Display>Score: {score}</Display>\n                            <Display>Rows: {rows}</Display>\n                            <Display>Level: {level}</Display>\n                        </StyledDisplays>\n                    </StyledDisplaysContainer>\n                    <Stage\n                        paused={gamePaused}\n                        stage={stage}\n                        showInstructions={!gameStarted}\n                        activeColumns={activeColumns}\n                    />\n                </StyledTetrisContainer>\n            </AppContainer>\n        </ThemeProvider>\n    );\n};\n\nexport default Tetris;\n","import { useState, useEffect, useCallback } from 'react';\n\nexport const useGameStatus = (rowsCleared: number) => {\n    const [score, setScore] = useState(0);\n    const [rows, setRows] = useState(0);\n    const [level, setLevel] = useState(0);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const linePoints = [40, 100, 300, 1200];\n\n    const calcScore = useCallback(() => {\n        if (rowsCleared > 0) {\n            // This is how original Tetris score is calculated\n            setScore(prev => prev + linePoints[rowsCleared - 1] * (level + 1));\n            setRows(prev => prev + rowsCleared);\n        }\n    }, [level, linePoints, rowsCleared]);\n\n    useEffect(() => {\n        calcScore();\n    }, [calcScore, rowsCleared, score]);\n\n    return [score, setScore, rows, setRows, level, setLevel] as const;\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Tetris from './Components/Tetris';\n\nReactDOM.render(<Tetris />, document.getElementById('tetris'));\n"],"sourceRoot":""}